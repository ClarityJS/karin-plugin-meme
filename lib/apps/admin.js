import {g,e,f,d as d$1}from'../chunk-RPTR4L7Q.js';import T from'node-karin';function M(n,t){let[i,o]=t.split("-").map(Number);return Math.min(Math.max(n,i),o)}var d=()=>{let n=Object.values(g).map(i=>i.title).join("|"),t=Object.values(g).flatMap(i=>Object.values(i.cfg).map(o=>o.title)).join("|");return new RegExp(`^#\u67E0\u7CD6\u8868\u60C5\u8BBE\u7F6E\\s*(${n})?\\s*(${t})?\\s*(.*)`)};async function b(n){let t=g,i=e.All(),o=await f.render("admin/index",{title:d$1.Plugin_AliasName,schema:t,cfg:i});await n.reply(o);}var v=T.command(d(),async n=>{let t=d().exec(n.msg);if(!t)return  false;let i=t[1],o=t[2],s=t[3].trim(),g$1=Object.entries(g).find(([,e])=>e.title===i),p=g$1?Object.entries(g$1[1].cfg).find(([e,r])=>r.title===o):null;if(!g$1||!p)return await b(n),true;let[c]=g$1,[m,l]=p;switch(l.type){case "boolean":{let e$1=s==="\u5F00\u542F";e.Modify(c,m,e$1);break}case "number":{let e$1=M(Number(s),l.limit??"0-0");e.Modify(c,m,e$1);break}case "string":{e.Modify(c,m,s);break}case "array":{let e$1=e[c][m]??[];if(/^添加/.test(s)){let r=s.replace(/^添加/,"").trim();e$1.includes(r)||e$1.push(r);}else if(/^删除/.test(s)){let r=s.replace(/^删除/,"").trim();e$1=e$1.filter(k=>k!==r);}else e$1=s.split(",").map(r=>r.trim());e.Modify(c,m,e$1);break}}return await b(n),true},{name:"\u67E0\u7CD6\u8868\u60C5:\u8BBE\u7F6E",priority:-1/0,event:"message",permission:"master"});export{v as admin};