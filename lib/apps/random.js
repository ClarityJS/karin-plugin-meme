import {d,b}from'../chunk-H7SQZYP6.js';import {e,d as d$1}from'../chunk-RPTR4L7Q.js';import u,{segment,logger}from'node-karin';var j=u.command(/^#?(?:(?:柠糖)?表情)?随机(?:表情|meme)(包)?$/i,async a=>{if(!e.meme.enable)return  false;try{let e=await d.get_meme_all_keys()??null;if(!e||e.length===0)throw new Error("\u672A\u627E\u5230\u53EF\u7528\u7684\u8868\u60C5\u5305");for(let t=e.length-1;t>0;t--){let r=Math.floor(Math.random()*(t+1));[e[t],e[r]]=[e[r],e[t]];}for(let t of e){let r=await d.get_meme_info(t)??null;if(!r)continue;let s=r.min_texts??0,i=r.max_texts??0,l=r.min_images??0,g=r.max_images??0,x=r.options??null;if(s===1&&i===1||l===1&&g===1||s===1&&l===1&&i===1&&g===1)try{let m=await d.get_meme_keyword(t)??null;m=m?m.map(y=>`[${y}]`):["[\u65E0]"];let c=await b.make_meme(a,t,s,i,l,g,x,"",!1),_=[segment.text(`\u672C\u6B21\u968F\u673A\u8868\u60C5\u4FE1\u606F\u5982\u4E0B:
`),segment.text(`\u8868\u60C5\u7684\u540D\u79F0: ${t}
`),segment.text(`\u8868\u60C5\u7684\u522B\u540D: ${m}
`)];if(c)_.push(segment.image(c));else throw new Error("\u8868\u60C5\u751F\u6210\u5931\u8D25,\u8BF7\u91CD\u8BD5!");return await a.reply(_),!0}catch(m){throw new Error(m.message)}}throw new Error("\u672A\u627E\u5230\u6709\u6548\u7684\u8868\u60C5\u5305")}catch(e$1){logger.error(e$1.message),e.meme?.errorReply&&await a.reply(`[${d$1.Plugin_AliasName}] \u751F\u6210\u968F\u673A\u8868\u60C5\u5931\u8D25, \u9519\u8BEF\u4FE1\u606F: ${e$1.message}`);}},{name:"\u67E0\u7CD6\u8868\u60C5:\u968F\u673A\u8868\u60C5",priority:-1/0,event:"message",permission:"all"});export{j as random};