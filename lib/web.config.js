import {d as d$1}from'./chunk-H7SQZYP6.js';import {b as b$1,d,e}from'./chunk-RPTR4L7Q.js';import {components}from'node-karin';async function b(l){return await Promise.all((await d$1.get_meme_all_keywords()??[]).map(async a=>{let i=await d$1.get_meme_key_by_keyword(a);return components.checkbox.create(l,{label:a,value:i})}))}var w={info:{name:d.Plugin_AliasName,description:"\u4E00\u4E2AKarin\u7248\u7684\u8868\u60C5\u5305\u5408\u6210\u63D2\u4EF6",author:[{name:b$1.author,home:b$1.homepage,avatar:"https://avatars.githubusercontent.com/u/196008293"}]},components:async()=>[components.accordion.create("server",{label:"\u670D\u52A1\u8BBE\u7F6E",children:[components.accordion.createItem("server",{title:"\u670D\u52A1\u8BBE\u7F6E",subtitle:"\u7528\u4E8E\u548C\u670D\u52A1\u76F8\u5173\u7684\u5185\u5BB9\uFF0C\u5982\u8BBE\u7F6E\u670D\u52A1\u5730\u5740\u7B49",children:[components.radio.group("mode",{label:"\u670D\u52A1\u6A21\u5F0F",description:"\u670D\u52A1\u6A21\u5F0F",defaultValue:e.access.mode.toString(),radio:[components.radio.create("0",{label:"\u4F7F\u7528\u8FDC\u7A0B\u670D\u52A1",description:"\u4F7F\u7528\u8FDC\u7A0B\u670D\u52A1",value:"0"}),components.radio.create("1",{label:"\u4F7F\u7528\u672C\u5730\u670D\u52A1",description:"\u4F7F\u7528\u672C\u5730\u670D\u52A1",value:"1"})]}),components.input.create("url",{label:"\u670D\u52A1\u5730\u5740",isRequired:false,description:"\u81EA\u5B9A\u4E49\u8868\u60C5\u670D\u52A1\u5730\u5740",defaultValue:e.server.url,isDisabled:e.server.mode===1,isReadOnly:e.server.mode===1,rules:[{regex:/^https?:\/\/((?:\d{1,3}\.){3}\d{1,3}|\w+\.\w{2,})(:\d{1,5})?$/i,error:"\u8BF7\u8F93\u5165\u6709\u6548\u7684URL\u5730\u5740"}]}),components.input.number("port",{label:"\u670D\u52A1\u7AEF\u53E3",description:"\u670D\u52A1\u7AEF\u53E3",defaultValue:e.server.port.toString(),isDisabled:e.server.mode===0,isReadOnly:e.server.mode===0,rules:[{regex:/^\d{1,5}$/,error:"\u8BF7\u8F93\u5165\u6709\u6548\u7684\u7AEF\u53E3\u53F7"}]}),components.input.number("timeout",{label:"\u8D85\u65F6\u65F6\u95F4",description:"\u8D85\u65F6\u65F6\u95F4\uFF0C\u5355\u4F4D\u4E3A\u79D2",defaultValue:e.server.timeout.toString()}),components.input.number("retry",{label:"\u91CD\u8BD5\u6B21\u6570",description:"\u91CD\u8BD5\u6B21\u6570",defaultValue:e.server.retry.toString()}),components.input.string("proxy_url",{label:"\u4EE3\u7406\u5730\u5740",description:"\u4EE3\u7406\u5730\u5740\uFF0C\u7528\u4E8E\u4E0B\u8F7D\u8868\u60C5\u670D\u52A1\u7AEF",defaultValue:e.server.proxy_url,placeholder:"\u8BF7\u8F93\u5165\u4EE3\u7406\u5730\u5740"})]})]}),components.accordion.create("meme",{label:"\u8868\u60C5\u8BBE\u7F6E",children:[components.accordion.createItem("meme",{title:"\u8868\u60C5\u8BBE\u7F6E",subtitle:"\u7528\u4E8E\u548C\u8868\u60C5\u76F8\u5173\u7684\u5185\u5BB9\uFF0C\u5982\u8BBE\u7F6E\u9ED8\u8BA4\u8868\u60C5\u7B49",children:[components.switch.create("enable",{label:"\u9ED8\u8BA4\u8868\u60C5",description:"\u662F\u5426\u5F00\u542F\u8BBE\u7F6E\u672C\u63D2\u4EF6\u4E3A\u9ED8\u8BA4\u8868\u60C5",defaultSelected:e.meme.enable}),components.switch.create("forceSharp",{label:"\u5F3A\u5236\u4F7F\u7528#\u89E6\u53D1",description:"\u662F\u5426\u5F3A\u5236\u4F7F\u7528#\u89E6\u53D1\uFF0C\u5F00\u542F\u540E\u9700\u8981\u5F3A\u5236\u5728\u6307\u4EE4\u524D\u52A0#",defaultSelected:e.meme.forceSharp}),components.switch.create("quotedImages",{label:"\u5F15\u7528\u6D88\u606F\u56FE\u7247",description:"\u662F\u5426\u5F00\u542F\u83B7\u53D6\u5F15\u7528\u6D88\u606F\u56FE\u7247\uFF0C\u5173\u95ED\u540E\u65E0\u6CD5\u83B7\u53D6\u5F15\u7528\u6D88\u606F\u7684\u56FE\u7247",defaultSelected:e.meme.quotedImages}),components.switch.create("errorReply",{label:"\u9519\u8BEF\u56DE\u590D",description:"\u662F\u5426\u5F00\u542F\u9519\u8BEF\u56DE\u590D\uFF0C\u5F00\u542F\u540E\u4F1A\u5728\u9519\u8BEF\u65F6\u56DE\u590D\u9519\u8BEF\u4FE1\u606F\uFF0C\u5173\u95ED\u540E\u53EA\u4F1A\u5728\u63A7\u5236\u53F0\u8F93\u51FA\u9519\u8BEF\u4FE1\u606F",defaultSelected:e.meme.errorReply})]})]}),components.accordion.create("access",{label:"\u540D\u5355\u8BBE\u7F6E",children:[components.accordion.createItem("access",{title:"\u540D\u5355\u8BBE\u7F6E",subtitle:"\u7528\u4E8E\u8BBE\u7F6E\u540D\u5355\u9650\u5236\uFF0C\u5982\u7528\u6237\u767D\u540D\u5355\u3001\u9ED1\u540D\u5355\uFF0C\u7981\u7528\u6307\u5B9A\u8868\u60C5\u7B49",children:[components.switch.create("enable",{label:"\u540D\u5355\u9650\u5236",description:"\u662F\u5426\u540D\u5355\u9650\u5236",defaultSelected:e.access.enable}),components.switch.create("blackListEnable",{label:"\u7981\u7528\u8868\u60C5\u5217\u8868",description:"\u662F\u5426\u5F00\u542F\u7981\u7528\u8868\u60C5\u5217\u8868",defaultSelected:e.access.blackListEnable}),components.radio.group("mode",{label:"\u540D\u5355\u9650\u5236\u6A21\u5F0F",description:"\u540D\u5355\u9650\u5236\u6A21\u5F0F",defaultValue:e.access.mode.toString(),radio:[components.radio.create("white",{label:"\u767D\u540D\u5355",value:"0"}),components.radio.create("black",{label:"\u9ED1\u540D\u5355",value:"1"})]}),components.input.group("userWhiteList",{label:"\u7528\u6237\u767D\u540D\u5355",description:"\u7528\u6237\u767D\u540D\u5355",data:e.access.userWhiteList,template:components.input.string("userWhiteList",{placeholder:"114514",label:"",color:"primary"})}),components.input.group("userBlackList",{label:"\u7528\u6237\u9ED1\u540D\u5355",description:"\u7528\u6237\u9ED1\u540D\u5355",data:e.access.userBlackList,template:components.input.string("userBlackList",{placeholder:"114514",label:"",color:"primary"})}),components.checkbox.group("blackList",{label:"\u7981\u7528\u8868\u60C5\u5217\u8868",description:"\u9009\u62E9\u8981\u7981\u7528\u7684\u8868\u60C5",defaultValue:e.access.blackList,checkbox:await b("blackList")})]})]}),components.accordion.create("protect",{label:"\u8868\u60C5\u4FDD\u62A4\u8BBE\u7F6E",children:[components.accordion.createItem("protect",{title:"\u8868\u60C5\u4FDD\u62A4\u8BBE\u7F6E",subtitle:"\u7528\u4E8E\u8BBE\u7F6E\u8868\u60C5\u4FDD\u62A4\u7B49\u529F\u80FD",children:[components.switch.create("enable",{label:"\u8868\u60C5\u4FDD\u62A4",description:"\u662F\u5426\u5F00\u542F\u8868\u60C5\u4FDD\u62A4",defaultSelected:e.protect.enable}),components.switch.create("master",{label:"\u4E3B\u4EBA\u4FDD\u62A4",description:"\u662F\u5426\u5F00\u542F\u4E3B\u4EBA\u4FDD\u62A4\uFF0C\u5F00\u542F\u540E\u624D\u4F1A\u8FDB\u884C\u4E3B\u4EBA\u4FDD\u62A4",defaultSelected:e.protect.master}),components.switch.create("userEnable",{label:"\u7528\u6237\u4FDD\u62A4",description:"\u662F\u5426\u5F00\u542F\u7528\u6237\u4FDD\u62A4\uFF0C\u5F00\u542F\u540E\u624D\u4F1A\u8FDB\u884C\u7528\u6237\u4FDD\u62A4",defaultSelected:e.protect.userEnable}),components.input.group("user",{label:"\u5176\u4ED6\u7528\u6237\u4FDD\u62A4\u5217\u8868",description:"\u5176\u4ED6\u7528\u6237\u4FDD\u62A4\u5217\u8868",data:e.protect.user,template:components.input.string("user",{placeholder:"114514",label:"",color:"primary"})}),components.checkbox.group("list",{label:"\u4FDD\u62A4\u8868\u60C5\u5217\u8868",description:"\u9009\u62E9\u8981\u4FDD\u62A4\u7684\u8868\u60C5",defaultValue:e.protect.list,checkbox:await b("list")})]})]}),components.accordion.create("stst",{label:"\u7EDF\u8BA1\u8BBE\u7F6E",children:[components.accordion.createItem("stat",{title:"\u7EDF\u8BA1\u8BBE\u7F6E",subtitle:"\u7528\u4E8E\u548C\u7EDF\u8BA1\u76F8\u5173\u7684\u5185\u5BB9\uFF0C\u5982\u5F00\u542F\u7EDF\u8BA1\u7B49",children:[components.switch.create("enable",{label:"\u7EDF\u8BA1",description:"\u662F\u5426\u5F00\u542F\u7EDF\u8BA1",defaultSelected:e.stat.enable})]})]}),components.accordion.create("other",{label:"\u5176\u4ED6\u8BBE\u7F6E",children:[components.accordion.createItem("other",{title:"\u5176\u4ED6\u8BBE\u7F6E",subtitle:"\u7528\u4E8E\u548C\u5176\u4ED6\u76F8\u5173\u7684\u5185\u5BB9\uFF0C\u5982\u8BBE\u7F6E\u6E32\u67D3\u7CBE\u5EA6\u7B49",children:[components.input.number("renderScale",{label:"\u6E32\u67D3\u7CBE\u5EA6",description:"\u6E32\u67D3\u7CBE\u5EA6\uFF0C\u6570\u5B57\u8D8A\u5927\u8D8A\u6E05\u6670\uFF0C\u4F46\u8D8A\u8017\u6027\u80FD",defaultValue:e.other.renderScale.toString(),rules:[{min:100,max:200,error:"\u6570\u5B57\u5E94\u5728100-200\u4E4B\u95F4"},{regex:/^\d+$/,error:"\u53EA\u80FD\u8F93\u5165\u6570\u5B57"}]})]})]})],save:l=>{console.log("\u65B0\u914D\u7F6E:",l);let a=false;try{let i=e.All();for(let[n,m]of Object.entries(l))for(let f of m)for(let[d,r]of Object.entries(f)){let c=i[n]?.[d];if(typeof r=="string"&&r.trim()==="")r="";else if(typeof c=="number"&&typeof r=="string"){let u=Number(r);isNaN(u)||(r=u);}else if(typeof c=="boolean"&&typeof r=="string")r=r==="true";else if(c===null)r=null;else if(typeof c=="object"&&typeof r=="string")try{r=JSON.parse(r);}catch{}e.Modify(n,d,r);}a=!0;}catch{a=false;}return {success:a,message:a?"\u0E05^\u2022\uFECC\u2022^\u0E05 \u55B5\u545C~ \u914D\u7F6E\u4FDD\u5B58\u6210\u529F\u5566~":"(\u2565\uFE4F\u2565) \u545C\u55B5... \u4FDD\u5B58\u5931\u8D25\u4E86\uFF0C\u8BF7\u68C0\u67E5\u4E00\u4E0B\u4E0B~"}}};
export{w as default};